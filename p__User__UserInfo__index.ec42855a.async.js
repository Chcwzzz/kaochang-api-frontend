"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[757],{4813:function(ke,A,r){r.r(A),r.d(A,{valueLength:function(){return g}});var Q=r(97857),U=r.n(Q),X=r(15009),o=r.n(X),Y=r(19632),F=r.n(Y),q=r(99289),E=r.n(q),ee=r(5574),v=r.n(ee),ae=r(35312),m=r(2453),ne=r(75081),re=r(83062),b=r(14726),P=r(26412),te=r(66476),se=r(17788),ue=r(93531),l=r(67294),ie=r(51042),_e=r(47389),oe=r(19050),le=r(20365),O=r(21987),M=r(54103),de=r(51164),L=r(63684),a=r(85893),g=function(C){return C&&C.trim().length>0},ce=function(){var C=["image/jpeg","image/jpg","image/svg","image/png","image/webp","image/jfif"],K=(0,ae.useModel)("@@initialState"),fe=K.initialState,ve=K.setInitialState,he=fe||{},e=he.loginUser,Ee=(0,l.useState)(!1),S=v()(Ee,2),ge=S[0],y=S[1],me=(0,l.useState)(!1),T=v()(me,2),Pe=T[0],R=T[1],De=(0,l.useState)(!1),x=v()(De,2),je=x[0],W=x[1],Oe=(0,l.useState)(""),Z=v()(Oe,2),Me=Z[0],Ce=Z[1],Ae=(0,l.useState)([]),k=v()(Ae,2),c=k[0],D=k[1],Fe=function(){return y(!1)},be=(0,l.useState)(""),w=v()(be,2),B=w[0],$=w[1],Le=(0,l.useState)(!1),z=v()(Le,2),we=z[0],$e=z[1],N=(0,l.useRef)(null),V=(0,l.useRef)(null),G=(0,l.useRef)(null),Be=(0,l.useState)(!1),J=v()(Be,2),Ie=J[0],I=J[1],Ue=[{title:"\u4E2A\u4EBA\u4FE1\u606F\u8BBE\u7F6E",description:(0,a.jsxs)("span",{children:["\u8FD9\u91CC\u662F\u4F60\u7684\u8D26\u53F7\u4FE1\u606F\uFF0C\u60A8\u53EF\u4EE5\u4FBF\u6377\u7684\u67E5\u770B\u60A8\u7684\u57FA\u672C\u4FE1\u606F\u3002",(0,a.jsx)("br",{}),"\u60A8\u8FD8\u53EF\u4EE5\u4FEE\u6539\u548C\u66F4\u65B0\u6635\u79F0\u548C\u5934\u50CF\u3002\u{1F970}"]}),target:function(){return N.current}},{title:"\u63A5\u53E3\u8C03\u7528\u51ED\u8BC1",description:"\u8FD9\u91CC\u662F\u60A8\u8C03\u7528\u63A5\u53E3\u7684\u51ED\u8BC1\uFF0C\u6CA1\u6709\u51ED\u8BC1\u5C06\u65E0\u6CD5\u8C03\u7528\u63A5\u53E3",target:function(){return V.current}},{title:"\u5F00\u53D1\u8005SDK",description:"\u60A8\u53EF\u4EE5\u4F7F\u7528\u5F00\u53D1\u8005SDK\uFF0C\u5FEB\u901F\u9AD8\u6548\u7684\u63A5\u5165\u63A5\u53E3\u5230\u60A8\u7684\u9879\u76EE\u4E2D",target:function(){return G.current}}],Ke=function(){var u=E()(o()().mark(function s(){var t,i,n,_,p;return o()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return W(!0),f.next=3,(0,L.as)();case 3:t=f.sent,t.data&&t.code===0&&(i=F()(c),e&&e.userAvatar&&(i[0]={uid:e==null?void 0:e.userAccount,name:e==null||(n=e.userAvatar)===null||n===void 0?void 0:n.substring((e==null?void 0:e.userAvatar.lastIndexOf("-"))+1),status:"done",percent:100,url:e==null?void 0:e.userAvatar},D(i)),$(e==null?void 0:e.userName),W(!1)),_=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),_?I(!1):(p=localStorage.getItem("tour"),p||I(!0));case 7:case"end":return f.stop()}},s)}));return function(){return u.apply(this,arguments)}}();(0,l.useEffect)(function(){Ke()},[]);var Se=function(s){return new Promise(function(t,i){var n=new FileReader;n.readAsDataURL(s),n.onload=function(){return t(n.result)},n.onerror=function(_){return i(_)}})},ye=function(){var u=E()(o()().mark(function s(t){return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(!t.url&&!t.preview)){n.next=4;break}return n.next=3,Se(t.originFileObj);case 3:t.preview=n.sent;case 4:Ce(t.url||t.preview),y(!0);case 6:case"end":return n.stop()}},s)}));return function(t){return u.apply(this,arguments)}}(),Te=function(){return(0,a.jsxs)("div",{children:[(0,a.jsx)(ie.Z,{}),(0,a.jsx)("div",{style:{marginTop:8},children:"Upload"})]})},Re=function(){var u=E()(o()().mark(function s(t){var i,n,_;return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(i=C.includes(t.type),i||m.ZP.error("\u56FE\u7247\u7C7B\u578B\u6709\u8BEF,\u8BF7\u4E0A\u4F20jpg/png/svg/jpeg/webp\u683C\u5F0F!"),n=t.size/1024/1024<1,n||m.ZP.error("\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7 1M !"),!(!n&&!i)){d.next=9;break}return _=F()(c),_[0]={status:"error",percent:100},D(_),d.abrupt("return",!1);case 9:return d.abrupt("return",i&&n);case 10:case"end":return d.stop()}},s)}));return function(t){return u.apply(this,arguments)}}(),xe=function(){var u=E()(o()().mark(function s(){var t;return o()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return R(!0),n.next=3,(0,L.d9)();case 3:t=n.sent,t.data&&t.code===0&&(ve({loginUser:t.data}),setTimeout(function(){m.ZP.success("\u51ED\u8BC1\u66F4\u65B0\u6210\u529F"),R(!1)},800));case 5:case"end":return n.stop()}},s)}));return function(){return u.apply(this,arguments)}}(),We=function(){var u=E()(o()().mark(function s(){var t,i;return o()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return t="",c&&c[0]&&g(c[0].url)&&(t=c[0].url),_.next=4,(0,L.WR)({userAvatar:t,userName:B});case 4:i=_.sent,i.data&&i.code===0&&m.ZP.success("\u4FE1\u606F\u66F4\u65B0\u6210\u529F");case 6:case"end":return _.stop()}},s)}));return function(){return u.apply(this,arguments)}}(),Ze={name:"file",withCredentials:!0,action:"".concat(de.h.baseURL,"/admin/file/upload?biz=user_avatar"),onChange:function(){var u=E()(o()().mark(function t(i){var n,_,p,d,f,H,j;return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(n=i.file,_=i.fileList,p=n.response,!(n.response&&p.data)){h.next=16;break}if(d=p.data,f=d.status,H=d.url,j=F()(c),!(p.code!==0||f==="error")){h.next=11;break}return m.ZP.error(p.message),n.status="error",j[0]={status:"error",percent:100},D(j),h.abrupt("return");case 11:n.status=f,j[0]={status:"done",url:H,percent:100},D(j),h.next=17;break;case 16:D(_);case 17:case"end":return h.stop()}},t)}));function s(t){return u.apply(this,arguments)}return s}(),listType:"picture-circle",onPreview:ye,fileList:c,beforeUpload:Re,maxCount:1,progress:{strokeColor:{"0%":"#108ee9","100%":"#87d068"},strokeWidth:3,format:function(s){return s&&"".concat(parseFloat(s.toFixed(2)),"%")}}};return(0,a.jsxs)(ne.Z,{spinning:je,children:[(0,a.jsxs)(M.ZP,{type:"inner",bordered:!0,direction:"column",children:[(0,a.jsxs)(M.ZP,{ref:N,extra:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(re.Z,{title:"\u63D0\u4EA4\u4FEE\u6539\u7684\u4FE1\u606F",children:(0,a.jsx)(b.ZP,{style:{marginLeft:10},onClick:We,children:"\u63D0\u4EA4\u4FEE\u6539"})})}),title:(0,a.jsx)("strong",{children:"\u4E2A\u4EBA\u4FE1\u606F\u8BBE\u7F6E"}),type:"inner",bordered:!0,children:[(0,a.jsxs)(P.Z.Item,{children:[(0,a.jsx)(le.Z,{rotationSlider:!0,quality:1,aspectSlider:!0,maxZoom:4,cropShape:"round",zoomSlider:!0,showReset:!0,children:(0,a.jsx)(te.Z,U()(U()({},Ze),{},{children:c.length>=1?void 0:Te()}))}),(0,a.jsx)(se.Z,{open:ge,footer:null,onCancel:Fe,children:(0,a.jsx)("img",{alt:"example",style:{width:"100%"},src:Me})})]}),(0,a.jsxs)(P.Z,{column:1,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{children:"\u6635\u79F0\uFF1A"}),(0,a.jsx)(O.Z,{editable:{icon:(0,a.jsx)(_e.Z,{}),tooltip:"\u7F16\u8F91",onChange:function(s){$(s)}},children:g(B)?B:"\u65E0\u540D\u6C0F"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{children:"\u6211\u7684id\uFF1A"}),(0,a.jsx)(O.Z,{copyable:g(e==null?void 0:e.id),children:e==null?void 0:e.id})]})]})]}),(0,a.jsx)("br",{}),(0,a.jsx)(M.ZP,{ref:V,bordered:!0,type:"inner",title:"\u5F00\u53D1\u8005\u51ED\u8BC1\uFF08\u8C03\u7528\u63A5\u53E3\u7684\u51ED\u8BC1\uFF09",extra:(0,a.jsxs)(b.ZP,{loading:Pe,onClick:xe,children:[e!=null&&e.accessKey&&e!==null&&e!==void 0&&e.secretKey?"\u66F4\u65B0":"\u751F\u6210","\u51ED\u8BC1"]}),children:e!=null&&e.accessKey&&e!==null&&e!==void 0&&e.secretKey?(0,a.jsxs)(P.Z,{column:1,children:[(0,a.jsx)(P.Z.Item,{label:"AccessKey",children:(0,a.jsx)(O.Z,{copyable:g(e==null?void 0:e.accessKey),children:e==null?void 0:e.accessKey})}),(0,a.jsx)(P.Z.Item,{label:"SecretKey",children:(0,a.jsx)(O.Z,{copyable:g(e==null?void 0:e.secretKey),children:e==null?void 0:e.secretKey})})]}):"\u6682\u65E0\u51ED\u8BC1,\u8BF7\u5148\u751F\u6210\u51ED\u8BC1"}),(0,a.jsx)("br",{}),(0,a.jsx)(M.ZP,{ref:G,type:"inner",title:(0,a.jsx)("strong",{children:"\u5F00\u53D1\u8005 SDK\uFF08\u5FEB\u901F\u63A5\u5165API\u63A5\u53E3\uFF09"}),bordered:!0,children:(0,a.jsx)(b.ZP,{size:"large",children:(0,a.jsxs)("a",{target:"_blank",href:"https://github.com/Chcwzzz/kaochang-api-sdk",rel:"noreferrer",children:[(0,a.jsx)(oe.Z,{})," Java SDK"]})})})]}),(0,a.jsx)(ue.Z,{open:Ie,onClose:function(){I(!1),localStorage.setItem("tour","true")},steps:Ue})]})};A.default=ce}}]);
