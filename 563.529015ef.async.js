"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[563],{88280:function(Te,ae,t){t.d(ae,{Z:function(){return u}});var b=t(4942),ie=t(97685),Y=t(91),K=t(74165),k=t(15861),d=t(1413),ce=t(87462),x=t(67294),q=t(42110),se=t(78026),de=function(r,C){return x.createElement(se.Z,(0,ce.Z)({},r,{ref:C,icon:q.Z}))},ue=x.forwardRef(de),L=t(97462),ve=t(952),W=t(89451),M=t(48171),_=t(53914),ee=t(22270),Ze=t(60249),fe=t(14726),ge=t(8232),me=t(21770),J=t(88306),ne=t(8880),p=t(61192),h=t(85893),he=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],Ce=["record","position","creatorButtonText","newRecordType","parentKey","style"],U=x.createContext(void 0);function te(e){var r=e.children,C=e.record,f=e.position,T=e.newRecordType,S=e.parentKey,R=(0,x.useContext)(U);return x.cloneElement(r,(0,d.Z)((0,d.Z)({},r.props),{},{onClick:function(){var $=(0,k.Z)((0,K.Z)().mark(function E(j){var D,w,y,V;return(0,K.Z)().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,(D=(w=r.props).onClick)===null||D===void 0?void 0:D.call(w,j);case 2:if(V=g.sent,V!==!1){g.next=5;break}return g.abrupt("return");case 5:R==null||(y=R.current)===null||y===void 0||y.addEditRecord(C,{position:f,newRecordType:T,parentKey:S});case 6:case"end":return g.stop()}},E)}));function O(E){return $.apply(this,arguments)}return O}()}))}function n(e){var r,C,f=(0,W.YB)(),T=e.onTableChange,S=e.maxLength,R=e.formItemProps,$=e.recordCreatorProps,O=e.rowKey,E=e.controlled,j=e.defaultValue,D=e.onChange,w=e.editableFormRef,y=(0,Y.Z)(e,he),V=(0,x.useRef)(void 0),z=(0,x.useRef)(),g=(0,x.useRef)();(0,x.useImperativeHandle)(y.actionRef,function(){return z.current},[z.current]);var re=(0,me.Z)(function(){return e.value||j||[]},{value:e.value,onChange:e.onChange}),H=(0,ie.Z)(re,2),c=H[0],P=H[1],I=x.useMemo(function(){return typeof O=="function"?O:function(l,m){return l[O]||m}},[O]),X=(0,M.J)(function(l){if(typeof l=="number"&&!e.name){if(l>=c.length)return l;var m=c&&c[l];return I==null?void 0:I(m,l)}if((typeof l=="string"||l>=c.length)&&e.name){var a=c.findIndex(function(i,s){var v;return(I==null||(v=I(i,s))===null||v===void 0?void 0:v.toString())===(l==null?void 0:l.toString())});if(a!==-1)return a}return l});(0,x.useImperativeHandle)(w,function(){var l=function(i){var s,v;if(i==null)throw new Error("rowIndex is required");var Z=X(i),F=[e.name,(s=Z==null?void 0:Z.toString())!==null&&s!==void 0?s:""].flat(1).filter(Boolean);return(v=g.current)===null||v===void 0?void 0:v.getFieldValue(F)},m=function(){var i,s=[e.name].flat(1).filter(Boolean);if(Array.isArray(s)&&s.length===0){var v,Z=(v=g.current)===null||v===void 0?void 0:v.getFieldsValue();return Array.isArray(Z)?Z:Object.keys(Z).map(function(F){return Z[F]})}return(i=g.current)===null||i===void 0?void 0:i.getFieldValue(s)};return(0,d.Z)((0,d.Z)({},g.current),{},{getRowData:l,getRowsData:m,setRowData:function(i,s){var v,Z;if(i==null)throw new Error("rowIndex is required");var F=X(i),Q=[e.name,(v=F==null?void 0:F.toString())!==null&&v!==void 0?v:""].flat(1).filter(Boolean),Oe=Object.assign({},(0,d.Z)((0,d.Z)({},l(i)),s||{})),je=(0,ne.Z)({},Q,Oe);return(Z=g.current)===null||Z===void 0||Z.setFieldsValue(je),!0}})},[X,e.name,g.current]),(0,x.useEffect)(function(){e.controlled&&(c||[]).forEach(function(l,m){var a;(a=g.current)===null||a===void 0||a.setFieldsValue((0,b.Z)({},"".concat(I(l,m)),l))},{})},[(0,_.ZP)(c),e.controlled]),(0,x.useEffect)(function(){if(e.name){var l;g.current=e==null||(l=e.editable)===null||l===void 0?void 0:l.form}},[(r=e.editable)===null||r===void 0?void 0:r.form,e.name]);var B=$||{},ye=B.record,A=B.position,be=B.creatorButtonText,xe=B.newRecordType,oe=B.parentKey,Se=B.style,le=(0,Y.Z)(B,Ce),N=A==="top",G=(0,x.useMemo)(function(){return typeof S=="number"&&S<=(c==null?void 0:c.length)?!1:$!==!1&&(0,h.jsx)(te,{record:(0,ee.h)(ye,c==null?void 0:c.length,c)||{},position:A,parentKey:(0,ee.h)(oe,c==null?void 0:c.length,c),newRecordType:xe,children:(0,h.jsx)(fe.ZP,(0,d.Z)((0,d.Z)({type:"dashed",style:(0,d.Z)({display:"block",margin:"10px 0",width:"100%"},Se),icon:(0,h.jsx)(ue,{})},le),{},{children:be||f.getMessage("editableTable.action.add","\u6DFB\u52A0\u4E00\u884C\u6570\u636E")}))})},[$,S,c==null?void 0:c.length]),Pe=(0,x.useMemo)(function(){return G?N?{components:{header:{wrapper:function(m){var a,i=m.className,s=m.children;return(0,h.jsxs)("thead",{className:i,children:[s,(0,h.jsxs)("tr",{style:{position:"relative"},children:[(0,h.jsx)("td",{colSpan:0,style:{visibility:"hidden"},children:G}),(0,h.jsx)("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(a=y.columns)===null||a===void 0?void 0:a.length,children:G})]})]})}}}}:{tableViewRender:function(m,a){var i,s;return(0,h.jsxs)(h.Fragment,{children:[(i=(s=e.tableViewRender)===null||s===void 0?void 0:s.call(e,m,a))!==null&&i!==void 0?i:a,G]})}}:{}},[N,G]),$e=(0,d.Z)({},e.editable),Re=(0,M.J)(function(l,m){var a,i,s;if((a=e.editable)===null||a===void 0||(i=a.onValuesChange)===null||i===void 0||i.call(a,l,m),(s=e.onValuesChange)===null||s===void 0||s.call(e,m,l),e.controlled){var v;e==null||(v=e.onChange)===null||v===void 0||v.call(e,m)}});return(e!=null&&e.onValuesChange||(C=e.editable)!==null&&C!==void 0&&C.onValuesChange||e.controlled&&e!==null&&e!==void 0&&e.onChange)&&($e.onValuesChange=Re),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(U.Provider,{value:z,children:(0,h.jsx)(p.Z,(0,d.Z)((0,d.Z)((0,d.Z)({search:!1,options:!1,pagination:!1,rowKey:O,revalidateOnFocus:!1},y),Pe),{},{tableLayout:"fixed",actionRef:z,onChange:T,editable:(0,d.Z)((0,d.Z)({},$e),{},{formProps:(0,d.Z)({formRef:g},$e.formProps)}),dataSource:c,onDataSourceChange:function(m){if(P(m),e.name&&A==="top"){var a,i=(0,ne.Z)({},[e.name].flat(1).filter(Boolean),m);(a=g.current)===null||a===void 0||a.setFieldsValue(i)}}}))}),e.name?(0,h.jsx)(L.Z,{name:[e.name],children:function(m){var a,i;if(!V.current)return V.current=c,null;var s=(0,J.Z)(m,[e.name].flat(1)),v=s==null?void 0:s.find(function(Z,F){var Q;return!(0,Ze.A)(Z,(Q=V.current)===null||Q===void 0?void 0:Q[F])});return V.current=c,v&&(e==null||(a=e.editable)===null||a===void 0||(i=a.onValuesChange)===null||i===void 0||i.call(a,v,s)),null}}):null]})}function o(e){var r=ve.ZP.useFormInstance();return e.name?(0,h.jsx)(ge.Z.Item,(0,d.Z)((0,d.Z)({style:{maxWidth:"100%"}},e==null?void 0:e.formItemProps),{},{name:e.name,shouldUpdate:function(f,T){var S=[e.name].flat(1);try{return JSON.stringify((0,J.Z)(f,S))!==JSON.stringify((0,J.Z)(T,S))}catch(R){return!0}},children:(0,h.jsx)(n,(0,d.Z)((0,d.Z)({},e),{},{editable:(0,d.Z)((0,d.Z)({},e.editable),{},{form:r})}))})):(0,h.jsx)(n,(0,d.Z)({},e))}o.RecordCreator=te;var u=o},66309:function(Te,ae,t){t.d(ae,{Z:function(){return te}});var b=t(67294),ie=t(62208),Y=t(93967),K=t.n(Y),k=t(98787),d=t(69760),ce=t(45353),x=t(53124),q=t(54548),se=t(10274),de=t(14747),ue=t(45503),L=t(91945);const ve=n=>{const{paddingXXS:o,lineWidth:u,tagPaddingHorizontal:e,componentCls:r,calc:C}=n,f=C(e).sub(u).equal(),T=C(o).sub(u).equal();return{[r]:Object.assign(Object.assign({},(0,de.Wf)(n)),{display:"inline-block",height:"auto",marginInlineEnd:n.marginXS,paddingInline:f,fontSize:n.tagFontSize,lineHeight:n.tagLineHeight,whiteSpace:"nowrap",background:n.defaultBg,border:`${(0,q.unit)(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderRadius:n.borderRadiusSM,opacity:1,transition:`all ${n.motionDurationMid}`,textAlign:"start",position:"relative",[`&${r}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:n.defaultColor},[`${r}-close-icon`]:{marginInlineStart:T,fontSize:n.tagIconSize,color:n.colorTextDescription,cursor:"pointer",transition:`all ${n.motionDurationMid}`,"&:hover":{color:n.colorTextHeading}},[`&${r}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${n.iconCls}-close, ${n.iconCls}-close:hover`]:{color:n.colorTextLightSolid}},["&-checkable"]:{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${r}-checkable-checked):hover`]:{color:n.colorPrimary,backgroundColor:n.colorFillSecondary},"&:active, &-checked":{color:n.colorTextLightSolid},"&-checked":{backgroundColor:n.colorPrimary,"&:hover":{backgroundColor:n.colorPrimaryHover}},"&:active":{backgroundColor:n.colorPrimaryActive}},["&-hidden"]:{display:"none"},[`> ${n.iconCls} + span, > span + ${n.iconCls}`]:{marginInlineStart:f}}),[`${r}-borderless`]:{borderColor:"transparent",background:n.tagBorderlessBg}}},W=n=>{const{lineWidth:o,fontSizeIcon:u,calc:e}=n,r=n.fontSizeSM;return(0,ue.TS)(n,{tagFontSize:r,tagLineHeight:(0,q.unit)(e(n.lineHeightSM).mul(r).equal()),tagIconSize:e(u).sub(e(o).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:n.defaultBg})},M=n=>({defaultBg:new se.C(n.colorFillQuaternary).onBackground(n.colorBgContainer).toHexString(),defaultColor:n.colorText});var _=(0,L.I$)("Tag",n=>{const o=W(n);return ve(o)},M),ee=function(n,o){var u={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&o.indexOf(e)<0&&(u[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(n);r<e.length;r++)o.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(n,e[r])&&(u[e[r]]=n[e[r]]);return u},fe=b.forwardRef((n,o)=>{const{prefixCls:u,style:e,className:r,checked:C,onChange:f,onClick:T}=n,S=ee(n,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:R,tag:$}=b.useContext(x.E_),O=V=>{f==null||f(!C),T==null||T(V)},E=R("tag",u),[j,D,w]=_(E),y=K()(E,`${E}-checkable`,{[`${E}-checkable-checked`]:C},$==null?void 0:$.className,r,D,w);return j(b.createElement("span",Object.assign({},S,{ref:o,style:Object.assign(Object.assign({},e),$==null?void 0:$.style),className:y,onClick:O})))}),ge=t(98719);const me=n=>(0,ge.Z)(n,(o,u)=>{let{textColor:e,lightBorderColor:r,lightColor:C,darkColor:f}=u;return{[`${n.componentCls}${n.componentCls}-${o}`]:{color:e,background:C,borderColor:r,"&-inverse":{color:n.colorTextLightSolid,background:f,borderColor:f},[`&${n.componentCls}-borderless`]:{borderColor:"transparent"}}}});var J=(0,L.bk)(["Tag","preset"],n=>{const o=W(n);return me(o)},M);function ne(n){return typeof n!="string"?n:n.charAt(0).toUpperCase()+n.slice(1)}const p=(n,o,u)=>{const e=ne(u);return{[`${n.componentCls}${n.componentCls}-${o}`]:{color:n[`color${u}`],background:n[`color${e}Bg`],borderColor:n[`color${e}Border`],[`&${n.componentCls}-borderless`]:{borderColor:"transparent"}}}};var h=(0,L.bk)(["Tag","status"],n=>{const o=W(n);return[p(o,"success","Success"),p(o,"processing","Info"),p(o,"error","Error"),p(o,"warning","Warning")]},M),he=function(n,o){var u={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&o.indexOf(e)<0&&(u[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(n);r<e.length;r++)o.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(n,e[r])&&(u[e[r]]=n[e[r]]);return u};const Ce=(n,o)=>{const{prefixCls:u,className:e,rootClassName:r,style:C,children:f,icon:T,color:S,onClose:R,closeIcon:$,closable:O,bordered:E=!0}=n,j=he(n,["prefixCls","className","rootClassName","style","children","icon","color","onClose","closeIcon","closable","bordered"]),{getPrefixCls:D,direction:w,tag:y}=b.useContext(x.E_),[V,z]=b.useState(!0);b.useEffect(()=>{"visible"in j&&z(j.visible)},[j.visible]);const g=(0,k.o2)(S),re=(0,k.yT)(S),H=g||re,c=Object.assign(Object.assign({backgroundColor:S&&!H?S:void 0},y==null?void 0:y.style),C),P=D("tag",u),[I,X,B]=_(P),ye=K()(P,y==null?void 0:y.className,{[`${P}-${S}`]:H,[`${P}-has-color`]:S&&!H,[`${P}-hidden`]:!V,[`${P}-rtl`]:w==="rtl",[`${P}-borderless`]:!E},e,r,X,B),A=N=>{N.stopPropagation(),R==null||R(N),!N.defaultPrevented&&z(!1)},[,be]=(0,d.Z)(O,$!=null?$:y==null?void 0:y.closeIcon,N=>N===null?b.createElement(ie.Z,{className:`${P}-close-icon`,onClick:A}):b.createElement("span",{className:`${P}-close-icon`,onClick:A},N),null,!1),xe=typeof j.onClick=="function"||f&&f.type==="a",oe=T||null,Se=oe?b.createElement(b.Fragment,null,oe,f&&b.createElement("span",null,f)):f,le=b.createElement("span",Object.assign({},j,{ref:o,className:ye,style:c}),Se,be,g&&b.createElement(J,{key:"preset",prefixCls:P}),re&&b.createElement(h,{key:"status",prefixCls:P}));return I(xe?b.createElement(ce.Z,{component:"Tag"},le):le)},U=b.forwardRef(Ce);U.CheckableTag=fe;var te=U}}]);
